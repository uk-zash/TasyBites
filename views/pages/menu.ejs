<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ... existing head content ... -->
   
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title><%= title %> - New Tasty Bites</title>
<link rel="stylesheet" href="/css/styles.css">
<link rel="stylesheet" href="/css/nav.css">
<link rel="stylesheet" href="/css/menu.css">
<!-- <link rel="stylesheet" href="/css/card.css"> -->
<style>
  /* Banner Container */
  .banner {
    height: 200px; /* Smaller height for the banner */
    position: relative;
    width: 100%;
    overflow: hidden;
  }

  /* For image banners */
  .banner img {
    object-fit: cover;
    width: 100%;
    height: 50%;
    object-position: center;
  }

  /* For text banners */
  .banner-text {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
    background-color: #fbbf24; /* Light yellow background for text banner */
    text-align: center;
    padding: 10px;
    font-size: 1.5rem; /* Default font size */
    font-weight: 700;
    color: #333;
  }

  /* Container Styles */
  .container {
    margin-top: 3rem;
  }

  /* Grid Layout for Menu Items */
  .menu-item-description {
    white-space: nowrap; /* Prevent wrapping */
    overflow: hidden; /* Hide overflow content */
    text-overflow: ellipsis; /* Add '...' at the end if text overflows */
  }

  /* Responsive Text for Small Screens */
  @media (max-width: 768px) {
    .banner-text {
      font-size: 1.25rem; /* Smaller font on mobile */
    }

    .banner {
      height: auto;
    }

    .container {
      margin-top: 1rem;
    }
  }

  @media (max-width: 480px) {
    .banner-text {
      font-size: 1rem; /* Even smaller font size on smaller screens */
    }
  }

  /* In your CSS file */
/* Style the select dropdown */
select {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background-color: white; /* Background color for the dropdown */
  background-image: url('/images/arrow-down.svg'); /* Custom arrow image */
  background-repeat: no-repeat;
  background-position: right 10px center; /* Position the arrow */
  background-size: 16px;
  padding: 12px 40px 12px 12px; /* Add padding to make room for the arrow */
  border: 1px solid #d1d5db; /* Border color */
  border-radius: 0.375rem; /* Rounded corners */
  font-size: 1rem;
  color: #333; /* Text color */
  width: 100%; /* Make the dropdown full-width */
  transition: all 0.3s ease; /* Smooth transition on hover/focus */
}

/* Hover and Focus styles */
select:hover,
select:focus {
  border-color: #4CAF50; /* Border color on hover/focus */
  outline: none; /* Remove default outline on focus */
}

/* Styling for the dropdown arrow (customize if you have your own icon) */
select::-ms-expand {
  display: none; /* Remove default arrow on IE */
}

/* For smaller screens */
@media (max-width: 768px) {
  select {
    font-size: 0.9rem; /* Slightly smaller font size on smaller screens */
    padding: 10px 35px 10px 10px; /* Adjust padding for smaller screens */
  }
}

.info{
  padding: 0rem 1rem 0rem 1rem;
}

.cart-btn {
    width: 100%;
    padding: 12px;
    background-color: #4CAF50;
    color: white;
    font-size: 0.8rem;
    font-weight: 600;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .cart-btn:hover {
    background-color: #45a049;
  }

  .product-name{
    white-space: nowrap;  /* Prevent the text from wrapping */
    overflow: hidden;     /* Hide overflow */
    text-overflow: ellipsis;
    font-size:1rem;
  }

</style>
</head>
<body>
  <%- include('../partials/_navbar') %>
  <%- include('../partials/_flash_messages') %>

  <div class="mx-auto px-1 md:px-4 mt-20 md:mt-20">

    <!-- Promotional Banner -->
    <% if (bannerImageURL && bannerImageURL !== '') { %>
      <div class="banner">
        <img src="<%= bannerImageURL %>" alt="Promotional Banner" />
      </div>
    <% } else if (bannerContent && bannerContent !== '') { %>
      <div class="banner">
        <div class="banner-text">
          <p><%= bannerContent %></p>
        </div>
      </div>
    <% } else { %>
      <div class="mt-16"></div>
    <% } %>

    <!-- After the promotional banner -->
    <div class="container mx-auto mt-6 px-4">
      <form action="/menu" method="GET" class="mb-4">
        <label for="category" class="block text-gray-700 font-semibold mb-2">Filter by Category:</label>
        <select name="category" id="category" class="w-full md:w-1/3 border border-gray-300 rounded px-3 py-2" onchange="this.form.submit()">
          <option value="" <%= (!selectedCategory || selectedCategory === '') ? 'selected' : '' %>>All Categories</option>
          <% categories.forEach(function(category) { %>
            <option value="<%= category %>" <%= (selectedCategory === category) ? 'selected' : '' %>><%= category %></option>
          <% }); %>
        </select>
      </form>
    </div>

    <!-- Menu Section -->
    <div class="container mx-auto px-1 md:px-4 mt-6">
      <h1 class="text-3xl font-semibold mb-6 text-center">Our Menu</h1>

      <% if (menuItems && Object.keys(menuItems).length > 0) { %>
        <% if (!selectedCategory || selectedCategory === '') { %>
          <% Object.keys(menuItems).forEach(function(category) { %>
            <h2 class="text-2xl font-semibold mt-8 mb-4 mx-12"><%= category %></h2>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
              <% menuItems[category].items.forEach(function(item) { %>
                <div class="bg-white rounded-lg shadow">
                  <a href="/product/<%= item.id %>">
                    <img src="<%= item.imageURL %>" alt="<%= item.name %>" class="w-full h-48 object-cover rounded">
                  </a>
                  <div class="mt-4 info">
                    <h3 class="text-xl font-semibold product-name"><%= item.name %></h3>
                    <p class="menu-item-description text-gray-600"><%= item.description %></p>
                    <p class="text-lg font-bold mt-2">₹<%= item.price %></p>
                  </div>
                  <!-- Add to Cart Form -->
                  <form action="/add-to-cart" method="POST" class="m-4">
                    <input type="hidden" name="id" value="<%= item.id %>">
                    <button type="submit" class="w-full bg-green-500 text-white py-2  hover:bg-green-600 cart-btn">
                      Add to Cart
                    </button>
                  </form>
                </div>
              <% }); %>
            </div>
            <!-- View More Button -->
            <% if (menuItems[category].hasMore) { %>
              <div class="text-center mt-4">
                <form action="/menu" method="GET">
                  <input type="hidden" name="category" value="<%= category %>">
                  <button type="submit" class="bg-blue-500 text-white py-2 px-6 rounded hover:bg-blue-600">
                    View More
                  </button>
                </form>
              </div>
            <% } %>
          <% }); %>
        <% } else { %>
          <!-- Display all items in the selected category -->
          <h2 class="text-2xl font-semibold mt-8 mb-4 mx-12"><%= selectedCategory %></h2>
          <div class="grid grid-cols-2 md:grid-cols-3 gap-6">
            <% menuItems[selectedCategory].items.forEach(function(item) { %>
              <div class="bg-white rounded-lg shadow p-4">
                <a href="/product/<%= item.id %>">
                  <img src="<%= item.imageURL %>" alt="<%= item.name %>" class="w-full h-48 object-cover rounded">
                </a>
                <div class="mt-4">
                  <h3 class="text-xl font-semibold product-name"><%= item.name %></h3>
                  <p class="menu-item-description text-gray-600"><%= item.description %></p>
                  <p class="text-lg font-bold mt-2">₹<%= item.price %></p>
                </div>
                <!-- Add to Cart Form -->
                <form action="/add-to-cart" method="POST" class="mt-4">
                  <input type="hidden" name="id" value="<%= item.id %>">
                  <button type="submit" class="w-full bg-green-500 text-white py-2 rounded hover:bg-green-600">
                    Add to Cart
                  </button>
                </form>
              </div>
            <% }); %>
          </div>
        <% } %>
      <% } else { %>
        <p>No menu items available.</p>
      <% } %>
    </div>

    <%- include("../partials/_footer") %>

    <!-- ... existing scripts ... -->
  </body>
</html>