<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="New Tasty Bites - Delicious food in Mahul, India" />
    <meta name="keywords" content="New Tasty Bites, fast food, burgers, pizza, Mahul, food delivery" />
    <meta property="og:title" content="<%= title %> | New Tasty Bites" />
    <meta property="og:description" content="Enjoy the best food at New Tasty Bites." />
    <meta property="og:image" content="/images/og-image.jpg" />
    <meta charset="UTF-8" />
    <title><%= title %> - New Tasty Bites</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/nav.css">
    <link rel="stylesheet" href="/css/card.css">
    <link rel="stylesheet" href="/css/menu.css">
    <style>
      
    </style>
  </head>
  <body>
    <%- include('../partials/_navbar') %>
    <%- include('../partials/_flash_messages') %>


    <div class="mx-auto px-1 md:px-4 mt-20 md:mt-20">

        <div class="container mx-auto px-4 mt-16">
          <!-- Product Details -->
          <div class="flex flex-col md:flex-row items-start md:items-center mb-8">
            <!-- Product Image -->
            <div class="w-full md:w-1/2">
              <img src="<%= product.imageURL %>" alt="<%= product.name %>" class="w-full h-auto rounded">
            </div>
            <!-- Product Info -->
            <div class="w-full md:w-1/2 md:pl-8 mt-6 md:mt-0">
              <h1 class="text-3xl font-semibold mb-4"><%= product.name %></h1>
              <p class="text-xl text-red-500 font-bold mb-2">â‚¹<%= product.price %></p>
              <p class="text-gray-700 mb-4"><%= product.description %></p>
              <!-- Add to Cart Form -->
              <form action="/add-to-cart" method="POST">
                <input type="hidden" name="id" value="<%= product.id %>">
                <button type="submit" class="bg-green-500 text-white py-2 px-6 rounded hover:bg-green-600">
                  Add to Cart
                </button>
              </form>
            </div>
          </div>
        
          <!-- Reviews Section -->
          <div class="mt-8">
            <!-- Flash Messages -->
            
        
            <h2 class="text-2xl font-semibold mb-4">Customer Reviews</h2>
        
            <!-- Display Approved Reviews -->
            <% if (reviews && reviews.length > 0) { %>
              <% reviews.forEach(function(review) { %>
                <div class="border rounded p-4 mb-4">
                  <p class="font-semibold"><%= review.name %></p>
                  <p class="text-sm text-gray-600"><%= new Date(review.timestamp.toDate()).toLocaleDateString() %></p>
                  <p class="mt-2"><%= review.reviewText %></p>
                </div>
              <% }); %>
            <% } else { %>
              <p>No reviews yet. Be the first to review this product!</p>
            <% } %>
        
            <!-- Review Submission Form -->
            <div class="mt-6">
              <h3 class="text-xl font-semibold mb-4">Write a Review</h3>
              <form action="/product/<%= product.id %>/review" method="POST">
                <div class="mb-4">
                  <label class="block text-gray-700">Name</label>
                  <input type="text" name="name" class="w-full border border-gray-300 rounded px-3 py-2" required>
                </div>
                <div class="mb-4">
                  <label class="block text-gray-700">Email</label>
                  <input type="email" name="email" class="w-full border border-gray-300 rounded px-3 py-2" required>
                </div>
                <div class="mb-4">
                  <label class="block text-gray-700">Your Review</label>
                  <textarea name="reviewText" rows="4" class="w-full border border-gray-300 rounded px-3 py-2" required></textarea>
                </div>
                <button type="submit" class="bg-blue-500 text-white py-2 px-6 rounded hover:bg-blue-600">
                  Submit Review
                </button>
              </form>
            </div>
          </div>
        </div>

    </div>

    <%- include("../partials/_footer") %>

    <script>
      // Get elements
      const hamburgerMenuButton = document.getElementById("hamburger-menu");
      const mobileMenu = document.getElementById("mobile-menu");

      // Toggle menu visibility on hamburger click
      hamburgerMenuButton.addEventListener("click", function() {
        mobileMenu.classList.toggle("open"); // Show or hide the mobile menu
        hamburgerMenuButton.classList.toggle("active"); // Toggle hamburger to cross and vice versa
      });
    </script>
  </body>
</html>
